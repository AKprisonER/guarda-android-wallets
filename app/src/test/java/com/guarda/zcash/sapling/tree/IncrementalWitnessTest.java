package com.guarda.zcash.sapling.tree;

import com.google.gson.Gson;
import com.google.gson.reflect.TypeToken;

import org.junit.Test;

import java.lang.reflect.Type;

public class IncrementalWitnessTest {

    @Test
    public void fromJson() throws Exception {
        String s = "{\"a\":{\"b\":\"506f96b6d3cb6ed9a87f36ab533a5505a83d754971985df9d01300f4ec24d314\",\"c\":\"\",\"d\":[\"1216413f56478c9bfc9e1c623f61848b8cae2a966211477eecead78db279d60f\",\"856d1bae6d49e5a489af70c4d4b8c21a70b5c6fd09c6fb2740125688c0a79621\",\"21dfd67fddb094c440a32864d870d34d9e83df0c2b28c146fa4c24fa9afe961a\",\"\",\"\",\"\",\"\",\"cf7b375e6a75688cc0ef1a15383b5bf2e5cff48dfd9085716fd66b6f2a778a51\",\"\",\"\",\"40b2b7bb6685a8223ef74cfc49a21616f2eac4f89e6544bb1e7ece4b2ce2de18\",\"02495978904af777503c32872ce6398ca72cd86efc82a46a4323619da49b5d0f\",\"3457c7289a51a355b01114a154e1666f5a83dd19257db331ccef1ec7a72caa42\",\"43359e122f3e93ad3b9dbf673c12c1551a31efde6e4195d98e571e0db70dee47\",\"4bc8cc7ccc3f42d408bd00d811eafff7cd23b0d0d656ef383ac81a7789d0011a\"],\"e\":0},\"b\":[\"80f4c2f65dde176c81976b4dbee75e074536379355b6ec26cd08222f2cc33c3d\",\"08f252fab87bde2abdf528154ba57c742939f07d53cd70f300f7fa0d25639b07\",\"3f66c3e56180b718469bc334e71c4d4fc1cb0a09010d88ecc109c34602389866\",\"a35a7bbec51cedf847d230f72bd5c74eea24186536f28eaf51bb0356e2f8056a\",\"db0d804c3fde2602fcf5c41daebe2e24f301683d32ac522b46a04b21f6aef93b\",\"ea99595baa12db9fb3c225a67b5d491f99e08f2ba233588f7b62f853c9e4e853\"],\"c\":{\"b\":\"2168da65fa75d94c86d57bd290cbc60a85a7cd02a65ffba297e5ecbb6d32e054\",\"c\":\"\",\"d\":[\"a635dd686229b33103f19bee73ffffde30726a1b122054446a0827079fac5a67\",\"8312ebddac073ea7157c2cc68bf17c3c0ffe6e03da96ec888916f1ae0a07cc47\",\"a08eae1f184b342dc68ae7d78b879d12c20119b3e7e55f56e7ec9b9d20cf8939\",\"\",\"\",\"\",\"\",\"c5587b7ef4e47eac08826e6ca8a597b0d9878e133c62bf09a865eda033f51e07\",\"61c2e786fb96edbaad66216b498f26f1b8faa1cc4115a031e8e098ce7b390666\"],\"e\":0},\"d\":10}";
        String s1 = "{\"a\":{\"a\":\"f36d2424187d32904b02f61b870f805f68bef5820201ff8f8953cbb488163338\",\"b\":\"dab03f77fba576f1738dcbec0d03ae0c7d9d784902d15393bf3aebe32ea8c951\",\"c\":[\"f6c5546726b2fbc13350ed3f9c0f7e23048ade16f997ca9588f151e974a8bb17\",\"\",\"\",\"f7d823417b7048d9bc5ad4e6f95c0588a2c5989be65bd34fc52124835835b856\",\"\",\"9894f719ff95d8b25dd1b59b19cc6b09dce334f90ad98f798771ef95cc8c1b1c\",\"\",\"\",\"cbb83ba8a274c47bd32a5a8653a6207fc19bf5a693cafae0acd00cec018f0350\",\"\",\"\",\"ae0909302768446f8574aebba85053242b8602ce2f9e2c94423ac626256e3431\",\"\",\"\",\"\",\"754bb593ea42d231a7ddf367640f09bbf59dc00f2c1d2003cc340e0c016b5b13\"],\"d\":0},\"b\":[\"5ada17c974f8ec83e51681b417fd7c133a57b118bd3fff2b568f239ceba7ca3e\",\"104d6552155c85e4612174581e2457d696dce281ae79a055f9378c7e28baec09\",\"fa274652c5f86cf118c8ca0db73448c7ec559198d0bea4331726634f0fe8255a\",\"a5f69c34836b6990c4c54d549fafa84221283405d87cb6b65e90bc3c436a2520\",\"2cbfd151085bd7f6e8f574a7f5a8a1be040e24e4e6bc98ed29f33f4de7102170\",\"6a61de773c03a72e6a688a664a456e29444c23b6856465ae01370a5e50a4de16\",\"65f252104fae8909701df1dfaf6797d2b5e6c5692da748f41467f0331e16082c\",\"63b3c0e88b1261332be9c37f87a0bcb4274ad6edf642eeaa7bd39b157ed17a23\"],\"c\":{\"a\":\"68c50b7efe1fd4cfd1a87bc8457c66d1379bd5a95e42335166c84557359eeb3a\",\"b\":\"\",\"c\":[\"da076d3526f7f7ceb76da400f258ef94f3d402991cf6f8612f13513f36b2905a\",\"\",\"45b2987bc8e21fdb8280cad91fff9a6c4b287b0f1eed5517482c0eca009c164e\",\"20f249f1e349d23d17f25131fda268ad7b22b49108e9c1cb84b645458706b00f\",\"\",\"27cded3458d4dbc1a3131fbb8b0e14037b6b1a2a214b7326600e188553154e50\",\"ec4b7bc354e17ea8b87fe4817962c8b78a0eaad5fd2344f6667fc336cbcd9325\",\"9eec34218904f2cd5449b8a9948e8a6b7892f8f3af5c87f56bcfba6aa78b6230\",\"f3ef2a98fcdeee39733dec129e6dd29bda12a608da6942d644f01dc3e38f5330\",\"\",\"\",\"3009f30bc78413152f4620aa980f711cee89bddb4bb10486067ee94e6d22a272\",\"88204c256935d05a22ccf0c273619854917c3af44f78d35c766f44570dfce65b\"],\"d\":0},\"d\":14}";
        String s2 = "{\"a\":{\"b\":\"506f96b6d3cb6ed9a87f36ab533a5505a83d754971985df9d01300f4ec24d314\",\"c\":\"\",\"d\":[\"1216413f56478c9bfc9e1c623f61848b8cae2a966211477eecead78db279d60f\",\"856d1bae6d49e5a489af70c4d4b8c21a70b5c6fd09c6fb2740125688c0a79621\",\"21dfd67fddb094c440a32864d870d34d9e83df0c2b28c146fa4c24fa9afe961a\",\"\",\"\",\"\",\"\",\"cf7b375e6a75688cc0ef1a15383b5bf2e5cff48dfd9085716fd66b6f2a778a51\",\"\",\"\",\"40b2b7bb6685a8223ef74cfc49a21616f2eac4f89e6544bb1e7ece4b2ce2de18\",\"02495978904af777503c32872ce6398ca72cd86efc82a46a4323619da49b5d0f\",\"3457c7289a51a355b01114a154e1666f5a83dd19257db331ccef1ec7a72caa42\",\"43359e122f3e93ad3b9dbf673c12c1551a31efde6e4195d98e571e0db70dee47\",\"4bc8cc7ccc3f42d408bd00d811eafff7cd23b0d0d656ef383ac81a7789d0011a\"],\"e\":0},\"b\":[\"80f4c2f65dde176c81976b4dbee75e074536379355b6ec26cd08222f2cc33c3d\",\"08f252fab87bde2abdf528154ba57c742939f07d53cd70f300f7fa0d25639b07\",\"3f66c3e56180b718469bc334e71c4d4fc1cb0a09010d88ecc109c34602389866\",\"a35a7bbec51cedf847d230f72bd5c74eea24186536f28eaf51bb0356e2f8056a\",\"db0d804c3fde2602fcf5c41daebe2e24f301683d32ac522b46a04b21f6aef93b\",\"ea99595baa12db9fb3c225a67b5d491f99e08f2ba233588f7b62f853c9e4e853\"],\"c\":{\"b\":\"2168da65fa75d94c86d57bd290cbc60a85a7cd02a65ffba297e5ecbb6d32e054\",\"c\":\"\",\"d\":[\"a635dd686229b33103f19bee73ffffde30726a1b122054446a0827079fac5a67\",\"8312ebddac073ea7157c2cc68bf17c3c0ffe6e03da96ec888916f1ae0a07cc47\",\"a08eae1f184b342dc68ae7d78b879d12c20119b3e7e55f56e7ec9b9d20cf8939\",\"\",\"\",\"\",\"\",\"c5587b7ef4e47eac08826e6ca8a597b0d9878e133c62bf09a865eda033f51e07\",\"61c2e786fb96edbaad66216b498f26f1b8faa1cc4115a031e8e098ce7b390666\"],\"e\":0},\"d\":10}";
        try {
            Gson gson = new Gson();
            Type type = new TypeToken<IncrementalWitness>(){}.getType();
            IncrementalWitness iw = gson.fromJson(s1, type);

            iw.append("51c9a82ee3eb3abf9353d10249789d7d0cae030deccb8d73f176a5fb773fb0da");

            System.out.println("test " + iw);
            System.out.println("test1 " + IncrementalWitness.toJson(iw));
        } catch (Exception e) {
            System.out.println("test " + e.getMessage());
            e.printStackTrace();
        }
    }
}